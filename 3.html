<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Solve The Puzzle ‚ù§Ô∏è</title>

<style>
body{
    margin:0;
    font-family:Arial, sans-serif;
    text-align:center;
    background:linear-gradient(135deg,#ff9a9e,#fad0c4);
    color:white;
}

h2{
    padding-top:20px;
}

.puzzle-container{
    width:300px;
    height:450px;
    margin:20px auto;
    display:grid;
    grid-template-columns:repeat(2,1fr);
    grid-template-rows:repeat(3,1fr);
    gap:2px;
}

.piece{
    background-image:url('photo.jpeg');
    background-size:300px 450px;
    cursor:pointer;
}

#doneBtn{
    display:none;
    margin-top:20px;
    padding:12px 25px;
    font-size:16px;
    border:none;
    border-radius:25px;
    background:white;
    color:#ff4e50;
    cursor:pointer;
}
</style>
</head>

<body>

<h2>üíñ Solve The Puzzle For More Surprises üíñ</h2>

<div class="puzzle-container" id="puzzle"></div>

<button id="doneBtn" onclick="window.location.href='4.html'">
Done ‚ù§Ô∏è
</button>

<script>
const puzzle = document.getElementById("puzzle");
const doneBtn = document.getElementById("doneBtn");

let order = [0,1,2,3,4,5];
let currentOrder = [];

// shuffle
currentOrder = order.sort(()=>Math.random()-0.5);

function createPuzzle(){
    puzzle.innerHTML="";
    currentOrder.forEach(index=>{
        const div=document.createElement("div");
        div.className="piece";
        div.draggable=true;
        div.dataset.index=index;

        let row=Math.floor(index/2);
        let col=index%2;

        div.style.backgroundPosition = 
            (-col*150)+"px "+(-row*150)+"px";

        puzzle.appendChild(div);
    });
}

let dragged;

document.addEventListener("dragstart",e=>{
    if(e.target.classList.contains("piece")){
        dragged=e.target;
    }
});

document.addEventListener("dragover",e=>{
    e.preventDefault();
});

document.addEventListener("drop",e=>{
    if(e.target.classList.contains("piece")){
        let temp=dragged.dataset.index;
        dragged.dataset.index=e.target.dataset.index;
        e.target.dataset.index=temp;

        let draggedPos=dragged.style.backgroundPosition;
        dragged.style.backgroundPosition=e.target.style.backgroundPosition;
        e.target.style.backgroundPosition=draggedPos;

        checkWin();
    }
});

function checkWin(){
    let pieces=document.querySelectorAll(".piece");
    let correct=true;

    pieces.forEach((piece,i)=>{
        if(parseInt(piece.dataset.index)!==i){
            correct=false;
        }
    });

    if(correct){
        doneBtn.style.display="inline-block";
    }
}

createPuzzle();
</script>

</body>
</html>